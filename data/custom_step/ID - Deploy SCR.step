{"creationTimeStamp":"2025-07-29T15:18:15.330Z","modifiedTimeStamp":"2025-08-12T09:53:04.353Z","createdBy":"viyademo01","modifiedBy":"viyademo01","name":"ID - Deploy SCR.step","displayName":"ID - Deploy SCR.step","localDisplayName":"ID - Deploy SCR.step","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/85579360-dace-410c-80a3-5d8259b9df26","uri":"/dataFlows/steps/85579360-dace-410c-80a3-5d8259b9df26","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/85579360-dace-410c-80a3-5d8259b9df26","uri":"/dataFlows/steps/85579360-dace-410c-80a3-5d8259b9df26","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/85579360-dace-410c-80a3-5d8259b9df26","uri":"/dataFlows/steps/85579360-dace-410c-80a3-5d8259b9df26","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/85579360-dace-410c-80a3-5d8259b9df26","uri":"/dataFlows/steps/85579360-dace-410c-80a3-5d8259b9df26"},{"method":"POST","rel":"copy","href":"/dataFlows/steps/85579360-dace-410c-80a3-5d8259b9df26/copy","uri":"/dataFlows/steps/85579360-dace-410c-80a3-5d8259b9df26/copy","responseType":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/85579360-dace-410c-80a3-5d8259b9df26","uri":"/dataFlows/steps/85579360-dace-410c-80a3-5d8259b9df26","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/85579360-dace-410c-80a3-5d8259b9df26","uri":"/dataFlows/steps/85579360-dace-410c-80a3-5d8259b9df26","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[],"outputPorts":[]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"page1\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Settings\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_mudus_section\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Modus\",\n\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_modus\",\n\t\t\t\t\t\t\t\"type\": \"radiogroup\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"Pull image\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"Restart pod\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"Delete deployment\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"Get list of pods in namespace\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_pull_image_section\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Pull image from docker registry\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$_modus\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"Pull image\"\n\t\t\t\t\t],\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_scr_name\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"Container Image Name\",\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_scr_tag\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"Container Image Tag\",\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_app_owner\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"Owner\",\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_imagePull\",\n\t\t\t\t\t\t\t\"type\": \"dropdown\",\n\t\t\t\t\t\t\t\"label\": \"Image Pull Policy\",\n\t\t\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"Always\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"IfNotPresent\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"Never\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_num_env_vars\",\n\t\t\t\t\t\t\t\"type\": \"numstepper\",\n\t\t\t\t\t\t\t\"label\": \"Environment Variables\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"integer\": false,\n\t\t\t\t\t\t\t\"min\": 0,\n\t\t\t\t\t\t\t\"max\": 5,\n\t\t\t\t\t\t\t\"stepsize\": 1,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"env_var_01\",\n\t\t\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\t\t\"label\": \"Environment Variable 1\",\n\t\t\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_num_env_vars\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"name_01\",\n\t\t\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Name\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\t\t\"indent\": 0\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"value_01\",\n\t\t\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Value\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\t\t\"indent\": 0\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"env_var_02\",\n\t\t\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\t\t\"label\": \"Environment Variable 2\",\n\t\t\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_num_env_vars\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"name_02\",\n\t\t\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Name\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\t\t\"indent\": 0\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"value_02\",\n\t\t\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Value\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\t\t\"indent\": 0\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"env_var_03\",\n\t\t\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\t\t\"label\": \"Environment Variable 3\",\n\t\t\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_num_env_vars\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"name_03\",\n\t\t\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Name\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\t\t\"indent\": 0\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"value_03\",\n\t\t\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Value\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\t\t\"indent\": 0\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"env_var_04\",\n\t\t\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\t\t\"label\": \"Environment Variable 4\",\n\t\t\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_num_env_vars\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t3\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"name_04\",\n\t\t\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Name\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\t\t\"indent\": 0\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"value_04\",\n\t\t\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Value\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\t\t\"indent\": 0\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"env_var_05\",\n\t\t\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\t\t\"label\": \"Environment Variable 5\",\n\t\t\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_num_env_vars\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t4\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"name_05\",\n\t\t\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Name\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\t\t\"indent\": 0\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"value_05\",\n\t\t\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Value\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\t\t\"indent\": 0\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_restart_section\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Restart pod\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$_modus\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"Restart pod\"\n\t\t\t\t\t],\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_deployment_name_restart\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"Deployment name\",\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_delete_section\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Delete deployment\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$_modus\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"Delete deployment\"\n\t\t\t\t\t],\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_deployment_name_delete\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"Deployment name\",\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_get_list_section\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Get list of pods in namespace\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$_modus\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"Get list of pods in namespace\"\n\t\t\t\t\t],\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"text2\",\n\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\"text\": \"Run the step to receive a list of all pod running in the associated namespace in Kubernetes.\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"page2\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Options\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text1\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"The service URL to call the SCR Pull Service container\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_service_url\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"Service URL\",\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"_modus\": {\n\t\t\t\"value\": \"Pull image\"\n\t\t},\n\t\t\"_deployment_name_restart\": \"\",\n\t\t\"_deployment_name_delete\": \"\",\n\t\t\"_service_url\": \"pull-scr.agentic-ai.svc.cluster.local\"\n\t}\n}","templates":{"SAS":"/***************************************************************************\n* Custom Step: ID - Deploy SCR\n* --------------------------------------------------------------------------\n* The Deploy SCR node will:\n* - pull a SCR image into Kubernetes\n* - restart a pod running a SCR container\n* - delete a SCR deployment\n* - list all pods in the accosiated namespace\n* --------------------------------------------------------------------------\n* Note: Macros starting with an underscore contain UI variable values\n***************************************************************************/\n\n/***************************************************************************/\n/* Macro pullscr()                                                         */ \n/* ----------------------------------------------------------------------- */\n/* The macro will generate generate the k8s YAML file and apply it to k8s  */\n/***************************************************************************/\n%macro pullscr();\n\tfilename py temp;\n\tdata _null_;\n\t    file py;\n\t\tput 'import requests';\n\t\tput ' ';\n\t\tput 'SCR_NAME= SAS.symget(''_scr_name'').strip()';\n\t\tput 'SCR_TAG= SAS.symget(''_scr_tag'').strip()';\n\t\tput 'APP_OWNER= SAS.symget(''_app_owner'').strip()';\n\t\tput 'SERVICE_URL= SAS.symget(''_service_url'').strip()';\n\t\tput 'IMAGE_PULL_POLICY= SAS.symget(''_imagePull'').strip()';\n\t\tput 'ENV_VARS= []';\n\t\tput 'name= SAS.symget(''name_01'').strip()';\n\t\tput 'value= SAS.symget(''value_01'').strip()';\n\t\tput 'if len(name) > 0:';\n\t\tput '    env= {name:value}';\n\t\tput '    ENV_VARS.append(env)';\n\t\tput 'name= SAS.symget(''name_02'').strip()';\n\t\tput 'value= SAS.symget(''value_02'').strip()';\n\t\tput 'if len(name) > 0:';\n\t\tput '    env= {name:value}';\n\t\tput '    ENV_VARS.append(env)';\n\t\tput 'name= SAS.symget(''name_03'').strip()';\n\t\tput 'value= SAS.symget(''value_03'').strip()';\n\t\tput 'if len(name) > 0:';\n\t\tput '    env= {name:value}';\n\t\tput '    ENV_VARS.append(env)';\n\t\tput 'name= SAS.symget(''name_04'').strip()';\n\t\tput 'value= SAS.symget(''value_04'').strip()';\n\t\tput 'if len(name) > 0:';\n\t\tput '    env= {name:value}';\n\t\tput '    ENV_VARS.append(env)';\n\t\tput 'name= SAS.symget(''name_05'').strip()';\n\t\tput 'value= SAS.symget(''value_05'').strip()';\n\t\tput 'if len(name) > 0:';\n\t\tput '    env= {name:value}';\n\t\tput '    ENV_VARS.append(env)';\n\t\tput ' ';\n\t\tput '# Define the URL of the REST API';\n\t\tput 'url= f''http://{SERVICE_URL}/pull-scr/pull-scr''';\n\t\tput '# Define the JSON payload to send';\n\t\tput 'payload = {';\n\t\tput '\t''scr_name'': SCR_NAME,';\n\t\tput '\t''scr_tag'': SCR_TAG,';\n\t\tput '   ''app_owner'': APP_OWNER,';\n\t\tput '\t''image_pull_policy'': IMAGE_PULL_POLICY,';\n\t\tput '\t''env_vars'': ENV_VARS';\n\t\tput '}';\n\t\tput ' ';\n\t\tput '# Send the POST request';\n\t\tput 'response= requests.post(url, json=payload, verify=False)';\n\t\tput ' ';\n\t\tput 'url= \"\"';\n\t\tput 'if response.status_code > 200 and response.status_code < 500:';\n\t\tput '\tmsg= response.json()[''error'']';\n\t\tput 'elif response.status_code == 500:';\n\t\tput '\tmsg= print(response.text)';\n\t\tput 'elif response.status_code == 200:';\n\t\tput '\tmsg= response.json()[''message'']';\n\t\tput '\turl= response.json()[''url'']';\n\t\tput ' ';\n\t\tput 'i= 1';\n\t\tput 'msg= msg.replace('' - '', ''\\n'')';\n\t\tput 'for line in msg.split(''\\n''):';\n\t\tput '    if line:';\n\t\tput '        line= line.replace(''Error:'', ''ERROR:'')';\n\t\tput '        line= line.replace('' '', '' @'')';\n\t\tput '        line= line.replace('':'', '':@'')';\n\t\tput '        buffer= ''''';\n\t\tput '        for w in line.split(''@''):';\n\t\tput '            if len(buffer + w) <= 80:';\n\t\tput '                buffer+= w';\n\t\tput '            else:';\n\t\tput '                SAS.symput(f''msg{i}'', buffer)';\n\t\tput '                i+= 1';\n\t\tput '                buffer= f''    {w}''';\n\t\tput '        SAS.symput(f''msg{i}'', buffer)';\n\t\tput '        i+= 1';\n\t\tput 'SAS.symput(f''msgcnt'', i-1)';\n\t\tput 'SAS.symput(f''url'', url)';\n\trun;\n\t\n\tproc python infile= py;\n\trun;\n\n    /* output result */\t\n\tdata _null_;\n\t    file print; \n\t\tput 'Result:';\n\t    %let i=0;\n\t    %do %while(&i < &MSGCNT);\n\t      %let i = %eval(&i+1);\n\t\t\tput \"%BQUOTE(&&MSG&i)\";\n\t\t%end;\n\t\tput '-----';\n\t\tput \"SCR URL= %BQUOTE(&URL)\";\n\trun;\n%mend pullscr;\n\n/***************************************************************************/\n/* Macro restartscr()                                                       */ \n/* ----------------------------------------------------------------------- */\n/* The macro deletes the deployment, service and ingress for the SCR image */\n/***************************************************************************/\n%macro restartscr();\n\tfilename py temp;\n\tdata _null_;\n\t    file py;\n\t\tput 'import requests';\n\t\tput ' ';\n\t\tput 'SCR_DEPLOYMENT= SAS.symget(''_deployment_name_restart'').strip()';\n\t\tput 'SERVICE_URL= SAS.symget(''_service_url'').strip()';\n\t\tput ' ';\n\t\tput '# Define the URL of the REST API';\n\t\tput 'url= f''http://{SERVICE_URL}/pull-scr/restart-scr''';\n\t\tput '# Define the JSON payload to send';\n\t\tput 'payload = {';\n\t\tput '\t''deployment_name'': SCR_DEPLOYMENT';\n\t\tput '}';\n\t\tput ' ';\n\t\tput '# Send the POST request';\n\t\tput 'response= requests.post(url, json=payload, verify=False)';\n\t\tput ' ';\n\t\tput 'url= \"\"';\n\t\tput 'if response.status_code > 200 and response.status_code < 500:';\n\t\tput '\tmsg= response.json()[''error'']';\n\t\tput 'elif response.status_code == 500:';\n\t\tput '\tmsg= print(response.text)';\n\t\tput 'elif response.status_code == 200:';\n\t\tput '\tmsg= response.json()[''message'']';\n\t\tput '\turl= response.json()[''url'']';\n\t\tput ' ';\n\t\tput 'i= 1';\n\t\tput 'msg= msg.replace('' - '', ''\\n'')';\n\t\tput 'for line in msg.split(''\\n''):';\n\t\tput '    if line:';\n\t\tput '        line= line.replace(''Error:'', ''ERROR:'')';\n\t\tput '        line= line.replace('' '', '' @'')';\n\t\tput '        line= line.replace('':'', '':@'')';\n\t\tput '        buffer= ''''';\n\t\tput '        for w in line.split(''@''):';\n\t\tput '            if len(buffer + w) <= 80:';\n\t\tput '                buffer+= w';\n\t\tput '            else:';\n\t\tput '                SAS.symput(f''msg{i}'', buffer)';\n\t\tput '                i+= 1';\n\t\tput '                buffer= f''    {w}''';\n\t\tput '        SAS.symput(f''msg{i}'', buffer)';\n\t\tput '        i+= 1';\n\t\tput 'SAS.symput(f''msgcnt'', i-1)';\n\t\tput 'SAS.symput(f''url'', url)';\n\trun;\n\t\n\tproc python infile= py;\n\trun;\n\n    /* output result */\t\n\tdata _null_;\n\t    file print; \n\t\tput 'Result:';\n\t    %let i=0;\n\t    %do %while(&i < &MSGCNT);\n\t      %let i = %eval(&i+1);\n\t\t\tput \"%BQUOTE(&&MSG&i)\";\n\t\t%end;\n\t\tput '-----';\n\t\tput \"SCR URL= %BQUOTE(&URL)\";\n\trun;\n%mend restartscr;\n\n/***************************************************************************/\n/* Macro deletescr()                                                       */ \n/* ----------------------------------------------------------------------- */\n/* The macro deletes the deployment, service and ingress for the SCR image */\n/***************************************************************************/\n%macro deletescr();\n\tfilename py temp;\n\tdata _null_;\n\t    file py;\n\t\tput 'import requests';\n\t\tput ' ';\n\t\tput 'SCR_DEPLOYMENT= SAS.symget(''_deployment_name_delete'').strip()';\n\t\tput 'SERVICE_URL= SAS.symget(''_service_url'').strip()';\n\t\tput ' ';\n\t\tput '# Define the URL of the REST API';\n\t\tput 'url= f''http://{SERVICE_URL}/pull-scr/delete-scr''';\n\t\tput '# Define the JSON payload to send';\n\t\tput 'payload = {';\n\t\tput '\t''deployment_name'': SCR_DEPLOYMENT';\n\t\tput '}';\n\t\tput ' ';\n\t\tput '# Send the POST request';\n\t\tput 'response= requests.post(url, json=payload, verify=False)';\n\t\tput ' ';\n\t\tput 'url= \"\"';\n\t\tput 'if response.status_code > 200 and response.status_code < 500:';\n\t\tput '\tmsg= response.json()[''error'']';\n\t\tput 'elif response.status_code == 500:';\n\t\tput '\tmsg= print(response.text)';\n\t\tput 'elif response.status_code == 200:';\n\t\tput '\tmsg= response.json()[''message'']';\n\t\tput '\turl= response.json()[''url'']';\n\t\tput ' ';\n\t\tput 'i= 1';\n\t\tput 'msg= msg.replace('' - '', ''\\n'')';\n\t\tput 'for line in msg.split(''\\n''):';\n\t\tput '    if line:';\n\t\tput '        line= line.replace(''Error:'', ''ERROR:'')';\n\t\tput '        line= line.replace('' '', '' @'')';\n\t\tput '        line= line.replace('':'', '':@'')';\n\t\tput '        buffer= ''''';\n\t\tput '        for w in line.split(''@''):';\n\t\tput '            if len(buffer + w) <= 80:';\n\t\tput '                buffer+= w';\n\t\tput '            else:';\n\t\tput '                SAS.symput(f''msg{i}'', buffer)';\n\t\tput '                i+= 1';\n\t\tput '                buffer= f''    {w}''';\n\t\tput '        SAS.symput(f''msg{i}'', buffer)';\n\t\tput '        i+= 1';\n\t\tput 'SAS.symput(f''msgcnt'', i-1)';\n\t\tput 'SAS.symput(f''url'', url)';\n\trun;\n\t\n\tproc python infile= py;\n\trun;\n\n    /* output result */\t\n\tdata _null_;\n\t    file print; \n\t\tput 'Result:';\n\t    %let i=0;\n\t    %do %while(&i < &MSGCNT);\n\t      %let i = %eval(&i+1);\n\t\t\tput \"%BQUOTE(&&MSG&i)\";\n\t\t%end;\n\t\tput '-----';\n\t\tput \"SCR URL= %BQUOTE(&URL)\";\n\trun;\n%mend deletescr;\n\n/***************************************************************************/\n/* Macro listscr()                                                         */ \n/* ----------------------------------------------------------------------- */\n/* The macro will list all pods in the accosiated namespace in k8s         */\n/***************************************************************************/\n%macro listscr();\n\tfilename py temp;\n\tdata _null_;\n\t    file py;\n\t\tput 'import requests';\n\t\tput 'import pandas as pd';\n\t\tput ' ';\n\t\tput 'SERVICE_URL= SAS.symget(''_service_url'').strip()';\n\t\tput ' ';\n\t\tput '# Define the URL of the REST API';\n\t\tput 'url= f''http://{SERVICE_URL}/pull-scr/list-scr''';\n\t\tput ' ';\n\t\tput '# Send the GET request';\n\t\tput 'response= requests.get(url, verify=False)';\n\t\tput ' ';\n\t\tput 'url= \"\"';\n        put 'SAS.symput(''msg'', '''')';\n\t\tput 'if response.status_code > 200 and response.status_code < 500:';\n\t\tput '    msg= response.json()[''error'']';\n        put '    SAS.symput(''msg'', msg)';\n\t\tput 'elif response.status_code == 500:';\n\t\tput '    msg= print(response.text)';\n\t\tput 'elif response.status_code == 200:';\n\t\tput '    # First row is the header';\n\t\tput '    df= pd.DataFrame(response.json()[''list''][1:], columns=response.json()[''list''][0])';\n\t\tput '    ns= response.json()[''ns'']';\n\t\tput '    SAS.show(df, f''Pods in namespace: {ns}'', len(df))';\n\trun;\n\t\n\tproc python infile= py;\n\trun;\n\n    /* output result */\t\n\tdata _null_;\n\t    file print; \n\t\t%if %length(&MSG) > 0 %then %do;\n\t\t\tput \"%BQUOTE(&MSG)\";\n\t\t%end;\n\trun;\n%mend listscr;\n\n/* depending on the setting of UI paramater _modus we are calling the appropriate action */\n%if &_modus = Pull image %then %do;\n\t%pullscr();\n%end;\n%if &_modus = Restart pod %then %do;\n\t%restartscr();\n%end;\n%if &_modus = Delete deployment %then %do;\n\t%deletescr();\n%end;\n%if &_modus = Get list of pods in namespace %then %do;\n\t%listscr();\n%end;\n\n/* --------------------------------------------------------------------------- */\n/* clean up macros used in this step                                           */\n/* --------------------------------------------------------------------------- */\n%sysmacdelete pullscr; \n%sysmacdelete restartscr;\n%sysmacdelete deletescr;\n%sysmacdelete listscr;\n"}}